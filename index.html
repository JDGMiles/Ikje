<!DOCTYPE html><html><head><title>Ikje</title>

<link rel="stylesheet" type="text/css" href="style.css">
<link rel="shortcut icon" href="favicon.ico">
<meta name="viewport" content="width=689, initial-scale=1">

</head>

<body>
	<center>

		<table style="position:absolute; left:10px; top:10px; background-color:black;">
			<td>
				<a href="#popup1"><img title="Information" src="../jdgmiles.github.io/questionmark.png" style="width:60px; height:60px"></a><br>
				<a href="https://twitter.com/jimdgmiles" target=blank_><img title="James Miles on Twitter" src="../jdgmiles.github.io/twitter.png" style="width:60px; height:60px"></a><br>
				<a href="http://jdgmiles.github.io/" target="_blank"><img title="Projects Page" src="../jdgmiles.github.io/jdgm.png" style="width:60px; height:60px"></a>
			</td>
		</table>

		<div id="popup1" class="overlay">
			<div class="popup">
	      <div style="font-family:Georgia; color:white; text-align:center; font-size:75px">Ikje</div>
	      <a class="close" href="#">&times;</a><br style="line-height:5px">
	      <a style="font-family:Georgia; font-size:40px; color:white; text-align:center;"><img src="controls.png" style="width:500px"><br style="line-height:30px">
	    </div>
		</div>

		<canvas id="canvas" style="padding:0px 80px 0px 80px;"></canvas>
  </center>
</body>
</html>

<script type="text/javascript">

var field={width:650, height:650};

var canvas=document.getElementById("canvas"), ctx = canvas.getContext("2d");
canvas.width = field.width;
canvas.height = field.height;

var level=1;

var levelinfo=[];
var numberofgoals=[];
var goal=[];
var numberofenemies=[];
var enemy=[];

levelinfo[1]={fcolour:"#000000", rsize:300, rcolour:"#000000", rpipingcolour:"#DC9000", rpipingwidth:3, pradius:13, px:field.width/2, py:field.height/2, pcolour:"#660000", poutlinecolour:"#FFBBBB", poutlinewidth:3, pspeed:3, ttegd:10, gx:field.width/2, gy:field.height/2, ringoutcolour:"#BB0000"}

numberofgoals[1]=1;
goal[1]=[];
for(i=0; i<numberofgoals[1]; i++){
	goal[1][i]={
		x:field.width/2,
		y:field.width/2,
		radius:52,
		colour:"#444444",
		outlinecolour:"#DDDDDD",
		outlinewidth:2,
		touched:0
	}
}

numberofenemies[1]=2;
enemy[1]=[];
for(i=0; i<numberofenemies[1]; i++){
	enemy[1][i]={
		startingx:field.width/2+0.8*levelinfo[1].rsize*Math.cos(0),
		startingy:field.width/2+0.8*levelinfo[1].rsize*Math.sin(0),
		x:field.width/2+0.8*levelinfo[1].rsize*Math.cos(0),
		y:field.width/2+0.8*levelinfo[1].rsize*Math.sin(0),
		radius:50,
		colour:"#005500",
		outlinecolour:"#BBFFCC",
		outlinewidth:4,
		speed:0.7,
		touched:0,
		touchedcolour:"#330000",
		touchedoutline:"#EE0000",
		validgoal:[]
	}
	for(j=0; j<numberofgoals[1]; j++){enemy[1][i].validgoal[j]=1}
}

levelinfo[2]={fcolour:"#000000", rsize:300, rcolour:"#000000", rpipingcolour:"#0000DD", rpipingwidth:3, pradius:20, px:field.width/2, py:field.height/2, pcolour:"#000033", poutlinecolour:"#0066EE", poutlinewidth:2, pspeed:4, ttegd:30, ringoutcolour:"#BB0000"}

numberofgoals[2]=1;
goal[2]=[];
for(i=0; i<numberofgoals[2]; i++){
	goal[2][i]={
		x:field.width/2,
		y:field.height/2,
		radius:32,
		colour:"#444444",
		outlinecolour:"#DDDDDD",
		outlinewidth:2,
		touched:0
	}
}

numberofenemies[2]=4;
enemy[2]=[];
for(i=0; i<numberofenemies[2]; i++){
	enemy[2][i]={
		startingx:field.width/2+levelinfo[2].rsize*Math.cos(2*Math.PI*i/numberofenemies[2]),
		startingy:field.width/2+levelinfo[2].rsize*Math.sin(2*Math.PI*i/numberofenemies[2]),
		x:field.width/2+levelinfo[2].rsize*Math.cos(2*Math.PI*i/numberofenemies[2]),
		y:field.width/2+levelinfo[2].rsize*Math.sin(2*Math.PI*i/numberofenemies[2]),
		radius:32,
		colour:"#000088",
		outlinecolour:"#7799EE",
		outlinewidth:2,
		speed:1.5,
		touched:0,
		touchedcolour:"#330000",
		touchedoutline:"#EE0000",
		validgoal:[]
	}
	for(j=0; j<numberofgoals[2]; j++){enemy[2][i].validgoal[j]=1}
}

levelinfo[3]={fcolour:"#000000", rsize:300, rcolour:"#000000", rpipingcolour:"#00DD00", rpipingwidth:3, pradius:25, px:field.width/2, py:525, pcolour:"#005500", poutlinecolour:"#AACCAA", poutlinewidth:2, pspeed:3, ttegd:10, gx:field.width/2, gy:field.height/2, ringoutcolour:"#BB0000"}

numberofgoals[3]=1;
goal[3]=[];
for(i=0; i<numberofgoals[3]; i++){
	goal[3][i]={
		x:200,
		y:400,
		radius:25,
		colour:"#444444",
		outlinecolour:"#DDDDDD",
		outlinewidth:2,
		touched:0
	}
}

numberofenemies[3]=2;
enemy[3]=[];
for(i=0; i<numberofenemies[3]; i++){
	enemy[3][i]={
		startingx:field.width/2,
		startingy:110,
		x:field.width/2,
		y:120,
		radius:25,
		colour:"#008800",
		outlinecolour:"#AADDAA",
		outlinewidth:2,
		speed:4,
		touched:0,
		touchedcolour:"#330000",
		touchedoutline:"#EE0000",
		validgoal:[]
	}
	for(j=0; j<numberofgoals[3]; j++){enemy[3][i].validgoal[j]=1}
}

levelinfo[4]={fcolour:"#000000", rsize:300, rcolour:"#000000", rpipingcolour:"#00DD00", rpipingwidth:3, pradius:9, px:410, py:525, pcolour:"#005500", poutlinecolour:"#AACCAA", poutlinewidth:2, pspeed:3, ttegd:10, gx:field.width/2, gy:field.height/2, ringoutcolour:"#BB0000"}

numberofgoals[4]=2;
goal[4]=[];
goal[4][0]={
	x:200,
	y:400,
	radius:15,
	colour:"#444444",
	outlinecolour:"#DDDDDD",
	outlinewidth:2,
	touched:0
}
goal[4][1]={
	x:400,
	y:250,
	radius:45,
	colour:"#444444",
	outlinecolour:"#DDDDDD",
	outlinewidth:2,
	touched:0
}

numberofenemies[4]=2;
enemy[4]=[];
enemy[4][0]={
	startingx:field.width/2,
	startingy:90,
	x:field.width/2,
	y:90,
	radius:45,
	colour:"#008800",
	outlinecolour:"#AADDAA",
	outlinewidth:2,
	speed:0.6,
	touched:0,
	touchedcolour:"#330000",
	touchedoutline:"#EE0000",
	validgoal:[]
}
enemy[4][1]={
	startingx:70,
	startingy:360,
	x:70,
	y:360,
	radius:15,
	colour:"#008800",
	outlinecolour:"#AADDAA",
	outlinewidth:2,
	speed:2,
	touched:0,
	touchedcolour:"#330000",
	touchedoutline:"#EE0000",
	validgoal:[]
}
enemy[4][0].validgoal[0]=1;
enemy[4][0].validgoal[1]=0;
enemy[4][1].validgoal[0]=0;
enemy[4][1].validgoal[1]=1;

levelinfo[5]={fcolour:"#000000", rsize:300, rcolour:"#000000", rpipingcolour:"#00AADD", rpipingwidth:3, pradius:5, px:field.width/2, py:field.height/2, pcolour:"#CC0000", poutlinecolour:"#FFFFBB", poutlinewidth:2, pspeed:3, ttegd:70, gx:field.width/2, gy:field.height/2, ringoutcolour:"#BB0000"}

levelinfo[6]={fcolour:"#000000", rsize:300, rcolour:"#000000", rpipingcolour:"#00AADD", rpipingwidth:3, pradius:5, px:field.width/2, py:field.height/2, pcolour:"#CC0000", poutlinecolour:"#FFFFBB", poutlinewidth:2, pspeed:3, ttegd:70, gx:field.width/2, gy:field.height/2, ringoutcolour:"#BB0000"}

levelinfo[7]={fcolour:"#000000", rsize:300, rcolour:"#000000", rpipingcolour:"#FFDDEE", rpipingwidth:3, pradius:15, px:143, py:525, pcolour:"#BB4444", poutlinecolour:"#FFDDEE", poutlinewidth:2, pspeed:3, ttegd:10, gx:field.width/2, gy:field.height/2, ringoutcolour:"#BB0000"}

numberofgoals[7]=1;
goal[7]=[];
for(i=0; i<numberofgoals[7]; i++){
	goal[7][i]={
		x:510,
		y:525,
		radius:15,
		colour:"#444444",
		outlinecolour:"#DDDDDD",
		outlinewidth:2,
		touched:0
	}
}

numberofenemies[7]=2;
enemy[7]=[];
for(i=0; i<numberofenemies[7]; i++){
	enemy[7][i]={
		startingx:160,
		startingy:110,
		x:143,
		y:120,
		radius:15,
		colour:"#AA4466",
		outlinecolour:"#F6DDEE",
		outlinewidth:2,
		speed:2,
		touched:0,
		touchedcolour:"#330000",
		touchedoutline:"#EE0000",
		validgoal:[]
	}
	for(j=0; j<numberofgoals[7]; j++){enemy[7][i].validgoal[j]=1}
}

levelinfo[8]={fcolour:"#000000", rsize:300, rcolour:"#000000", rpipingcolour:"#00AADD", rpipingwidth:3, pradius:5, px:field.width/2, py:field.height/2, pcolour:"#CC0000", poutlinecolour:"#FFFFBB", poutlinewidth:2, pspeed:3, ttegd:70, gx:field.width/2, gy:field.height/2, ringoutcolour:"#BB0000"}

levelinfo[9]={fcolour:"#000000", rsize:300, rcolour:"#000000", rpipingcolour:"#00AADD", rpipingwidth:3, pradius:5, px:field.width/2, py:field.height/2, pcolour:"#CC0000", poutlinecolour:"#FFFFBB", poutlinewidth:2, pspeed:3, ttegd:70, gx:field.width/2, gy:field.height/2, ringoutcolour:"#BB0000"}

levelinfo[10]={fcolour:"#000000", rsize:300, rcolour:"#000000", rpipingcolour:"#00AADD", rpipingwidth:3, pradius:5, px:field.width/2, py:field.height/2, pcolour:"#CC0000", poutlinecolour:"#FFFFBB", poutlinewidth:2, pspeed:3, ttegd:70, gx:field.width/2, gy:field.height/2, ringoutcolour:"#BB0000"}

var numbers=["   një", "   dy", "   tre", " katër", "  pesë", "gjashtë", " shtatë", "  tetë", " nëntë", " dhjetë"];

var rightdown=0;
var leftdown=0;
var updown=0;
var downdown=0;

document.body.onkeydown = function(e){
	if(rightdown==0 && (e.keyCode == 39 || e.keyCode == 68)){rightdown++;}
	if(leftdown==0 && (e.keyCode == 37 || e.keyCode == 65)){leftdown++;}
	if(updown==0 && (e.keyCode == 38 || e.keyCode == 87)){updown++;}
	if(downdown==0 && (e.keyCode == 40 || e.keyCode == 83)){downdown++;}
}

document.body.onkeyup = function(e){
	if(e.keyCode == 39 || e.keyCode == 68){rightdown=0;}
	if(e.keyCode == 37 || e.keyCode == 65){leftdown=0;}
	if(e.keyCode == 38 || e.keyCode == 87){updown=0;}
	if(e.keyCode == 40 || e.keyCode == 83){downdown=0;}
}

var fps=60;

var player={x:levelinfo[level].px, y:levelinfo[level].py}

numberofgoals[5]=1;
goal[5]=[];
for(i=0; i<numberofgoals[5]; i++){
	goal[5][i]={
		x:field.width/2,
		y:field.width/2,
		radius:10,
		colour:"#444444",
		outlinecolour:"#DDDDDD",
		outlinewidth:2,
		touched:0
	}
}

numberofgoals[6]=1;
goal[6]=[];
for(i=0; i<numberofgoals[6]; i++){
	goal[6][i]={
		x:field.width/2,
		y:field.width/2,
		radius:10,
		colour:"#444444",
		outlinecolour:"#DDDDDD",
		outlinewidth:2,
		touched:0
	}
}

numberofgoals[8]=1;
goal[8]=[];
for(i=0; i<numberofgoals[8]; i++){
	goal[8][i]={
		x:field.width/2,
		y:field.width/2,
		radius:10,
		colour:"#444444",
		outlinecolour:"#DDDDDD",
		outlinewidth:2,
		touched:0
	}
}

numberofgoals[9]=1;
goal[9]=[];
for(i=0; i<numberofgoals[9]; i++){
	goal[9][i]={
		x:field.width/2,
		y:field.width/2,
		radius:10,
		colour:"#444444",
		outlinecolour:"#DDDDDD",
		outlinewidth:2,
		touched:0
	}
}

numberofgoals[10]=1;
goal[10]=[];
for(i=0; i<numberofgoals[10]; i++){
	goal[10][i]={
		x:field.width/2,
		y:field.width/2,
		radius:10,
		colour:"#444444",
		outlinecolour:"#DDDDDD",
		outlinewidth:2,
		touched:0
	}
}

numberofenemies[5]=21;
enemy[5]=[];
for(i=0; i<numberofenemies[5]; i++){
	enemy[5][i]={
		startingx:field.width/2+levelinfo[5].rsize*Math.cos(2*Math.PI*i/numberofenemies[5]),
		startingy:field.width/2+levelinfo[5].rsize*Math.sin(2*Math.PI*i/numberofenemies[5]),
		x:field.width/2+levelinfo[5].rsize*Math.cos(2*Math.PI*i/numberofenemies[5]),
		y:field.width/2+levelinfo[5].rsize*Math.sin(2*Math.PI*i/numberofenemies[5]),
		radius:9,
		colour:"#0000CC",
		outlinecolour:"#BBFFFF",
		outlinewidth:2,
		speed:1,
		touched:0,
		touchedcolour:"#330000",
		touchedoutline:"#EE0000",
		validgoal:[]
	}
	for(j=0; j<numberofgoals[5]; j++){enemy[5][i].validgoal[j]=1}
}

numberofenemies[6]=21;
enemy[6]=[];
for(i=0; i<numberofenemies[6]; i++){
	enemy[6][i]={
		startingx:field.width/2+levelinfo[6].rsize*Math.cos(2*Math.PI*i/numberofenemies[6]),
		startingy:field.width/2+levelinfo[6].rsize*Math.sin(2*Math.PI*i/numberofenemies[6]),
		x:field.width/2+levelinfo[6].rsize*Math.cos(2*Math.PI*i/numberofenemies[6]),
		y:field.width/2+levelinfo[6].rsize*Math.sin(2*Math.PI*i/numberofenemies[6]),
		radius:9,
		colour:"#0000CC",
		outlinecolour:"#BBFFFF",
		outlinewidth:2,
		speed:1,
		touched:0,
		touchedcolour:"#330000",
		touchedoutline:"#EE0000",
		validgoal:[]
	}
	for(j=0; j<numberofgoals[6]; j++){enemy[6][i].validgoal[j]=1}
}

numberofenemies[8]=21;
enemy[8]=[];
for(i=0; i<numberofenemies[8]; i++){
	enemy[8][i]={
		startingx:field.width/2+levelinfo[8].rsize*Math.cos(2*Math.PI*i/numberofenemies[8]),
		startingy:field.width/2+levelinfo[8].rsize*Math.sin(2*Math.PI*i/numberofenemies[8]),
		x:field.width/2+levelinfo[8].rsize*Math.cos(2*Math.PI*i/numberofenemies[8]),
		y:field.width/2+levelinfo[8].rsize*Math.sin(2*Math.PI*i/numberofenemies[8]),
		radius:9,
		colour:"#0000CC",
		outlinecolour:"#BBFFFF",
		outlinewidth:2,
		speed:1,
		touched:0,
		touchedcolour:"#330000",
		touchedoutline:"#EE0000",
		validgoal:[]
	}
	for(j=0; j<numberofgoals[8]; j++){enemy[8][i].validgoal[j]=1}
}

numberofenemies[9]=21;
enemy[9]=[];
for(i=0; i<numberofenemies[9]; i++){
	enemy[9][i]={
		startingx:field.width/2+levelinfo[9].rsize*Math.cos(2*Math.PI*i/numberofenemies[9]),
		startingy:field.width/2+levelinfo[9].rsize*Math.sin(2*Math.PI*i/numberofenemies[9]),
		x:field.width/2+levelinfo[9].rsize*Math.cos(2*Math.PI*i/numberofenemies[9]),
		y:field.width/2+levelinfo[9].rsize*Math.sin(2*Math.PI*i/numberofenemies[9]),
		radius:9,
		colour:"#0000CC",
		outlinecolour:"#BBFFFF",
		outlinewidth:2,
		speed:1,
		touched:0,
		touchedcolour:"#330000",
		touchedoutline:"#EE0000",
		validgoal:[]
	}
	for(j=0; j<numberofgoals[9]; j++){enemy[9][i].validgoal[j]=1}
}

numberofenemies[10]=21;
enemy[10]=[];
for(i=0; i<numberofenemies[10]; i++){
	enemy[10][i]={
		startingx:field.width/2+levelinfo[10].rsize*Math.cos(2*Math.PI*i/numberofenemies[10]),
		startingy:field.width/2+levelinfo[10].rsize*Math.sin(2*Math.PI*i/numberofenemies[10]),
		x:field.width/2+levelinfo[10].rsize*Math.cos(2*Math.PI*i/numberofenemies[10]),
		y:field.width/2+levelinfo[10].rsize*Math.sin(2*Math.PI*i/numberofenemies[10]),
		radius:9,
		colour:"#0000CC",
		outlinecolour:"#BBFFFF",
		outlinewidth:2,
		speed:1,
		touched:0,
		touchedcolour:"#330000",
		touchedoutline:"#EE0000",
		validgoal:[]
	}
	for(j=0; j<numberofgoals[10]; j++){enemy[10][i].validgoal[j]=1}
}

var doenemiesmove=0;

var time=0;
var restarttime=0;
var restartduration=60;

var won=0;
var totalenemygoaldistance=levelinfo[level].ttegd+1;

var textfont="40px Georgia";
var textcolor="255, 255, 255";
var textopacity=0;
var textxpos=10;
var textypos=70;
var fadeslowness=60;

var lost=0;
var ringout=0;
var collision=0;

var tempmingoaldist=0;
var goalstouched=0;

function draw(){

	ctx.fillStyle=levelinfo[level].fcolour;
	ctx.fillRect(0, 0, field.width, field.height);

	ctx.font=textfont;
  ctx.fillStyle = "rgba("+textcolor+", "+(1-Math.abs((fadeslowness-time)/fadeslowness))+")";
	ctx.fillText(numbers[level-1], textxpos, textypos);

	ctx.beginPath();
	ctx.arc(field.width/2, field.height/2, levelinfo[level].rsize, 0, 2 * Math.PI);
	ctx.fillStyle=levelinfo[level].rcolour;
	ctx.lineWidth=levelinfo[level].rpipingwidth;
	if(ringout){ctx.strokeStyle=levelinfo[level].ringoutcolour;}
	else{ctx.strokeStyle=levelinfo[level].rpipingcolour;}
	ctx.fill();
	ctx.stroke();

	for(i=0; i<numberofgoals[level]; i++){
		ctx.beginPath();
		ctx.arc(goal[level][i].x, goal[level][i].y, goal[level][i].radius, 0, 2 * Math.PI);
		ctx.fillStyle=goal[level][i].colour;
		ctx.lineWidth=goal[level][i].outlinewidth;
		ctx.strokeStyle=goal[level][i].outlinecolour;
		ctx.fill();
		ctx.stroke();
	}

	for(i=numberofenemies[level]-1; i>-1; i--){
		ctx.beginPath();
		ctx.arc(enemy[level][i].x, enemy[level][i].y, enemy[level][i].radius, 0, 2 * Math.PI);
		if(enemy[level][i].touched){ctx.fillStyle=enemy[level][i].touchedcolour; ctx.strokeStyle=enemy[level][i].touchedoutline;}
		else{ctx.fillStyle=enemy[level][i].colour; ctx.strokeStyle=enemy[level][i].outlinecolour;}
		ctx.lineWidth=enemy[level][i].outlinewidth;
		ctx.fill();
		ctx.stroke();
	}

	ctx.beginPath();
	ctx.arc(player.x, player.y, levelinfo[level].pradius, 0, 2 * Math.PI);
	ctx.fillStyle=levelinfo[level].pcolour;
	ctx.lineWidth=levelinfo[level].poutlinewidth;
	ctx.strokeStyle=levelinfo[level].poutlinecolour;
	ctx.fill();
	ctx.stroke();

	if(!won && !collision && !ringout && rightdown && (!updown && !downdown)){player.x+=levelinfo[level].pspeed; doenemiesmove=1;}
	else if(!won && !collision && !ringout && rightdown){player.x+=Math.sqrt(2)*levelinfo[level].pspeed/2; doenemiesmove=1;}

	if(!won && !collision && !ringout && leftdown && (!updown && !downdown)){player.x-=levelinfo[level].pspeed; doenemiesmove=1;}
	else if(!won && !collision && !ringout && leftdown){player.x-=Math.sqrt(2)*levelinfo[level].pspeed/2; doenemiesmove=1;}

	if(!won && !collision && !ringout && updown && (!leftdown && !rightdown)){player.y-=levelinfo[level].pspeed; doenemiesmove=1;}
	else if(!won && !collision && !ringout && updown){player.y-=Math.sqrt(2)*levelinfo[level].pspeed/2; doenemiesmove=1;}

	if(!won && !collision && !ringout && downdown && (!leftdown && !rightdown)){player.y+=levelinfo[level].pspeed; doenemiesmove=1;}
	else if(!won && !collision && !ringout && downdown){player.y+=Math.sqrt(2)*levelinfo[level].pspeed/2; doenemiesmove=1;}

	if(!lost && !won && Math.sqrt((player.x-field.width/2)*(player.x-field.width/2)+(player.y-field.height/2)*(player.y-field.height/2))>levelinfo[level].rsize-levelinfo[level].pradius){restarttime=time; lost=1; ringout=1;}

	if(doenemiesmove || !doenemiesmove){
		totalenemygoaldistance=0;
		for(i=0; i<numberofgoals[level]; i++){goal[level][i].touched=0;}
		for(i=0; i<numberofenemies[level]; i++){
			enemy[level][i].x-=enemy[level][i].speed*(enemy[level][i].x-player.x)/Math.sqrt((enemy[level][i].x-player.x)*(enemy[level][i].x-player.x)+(enemy[level][i].y-player.y)*(enemy[level][i].y-player.y));
			enemy[level][i].y-=enemy[level][i].speed*(enemy[level][i].y-player.y)/Math.sqrt((enemy[level][i].x-player.x)*(enemy[level][i].x-player.x)+(enemy[level][i].y-player.y)*(enemy[level][i].y-player.y));

			tempmingoaldist=field.width;

			for(j=0; j<numberofgoals[level]; j++){
				if(enemy[level][i].validgoal[j] && Math.sqrt((enemy[level][i].x-goal[level][j].x)*(enemy[level][i].x-goal[level][j].x)+(enemy[level][i].y-goal[level][j].y)*(enemy[level][i].y-goal[level][j].y))<tempmingoaldist){tempmingoaldist=Math.sqrt((enemy[level][i].x-goal[level][j].x)*(enemy[level][i].x-goal[level][j].x)+(enemy[level][i].y-goal[level][j].y)*(enemy[level][i].y-goal[level][j].y));}
				if(Math.sqrt((enemy[level][i].x-goal[level][j].x)*(enemy[level][i].x-goal[level][j].x)+(enemy[level][i].y-goal[level][j].y)*(enemy[level][i].y-goal[level][j].y))<Math.min(enemy[level][i].radius, goal[level][j].radius)){goal[level][j].touched=1;}
			}

			totalenemygoaldistance+=tempmingoaldist;

			if(!lost && !won && Math.sqrt((enemy[level][i].x-player.x)*(enemy[level][i].x-player.x)+(enemy[level][i].y-player.y)*(enemy[level][i].y-player.y))<enemy[level][1].radius+levelinfo[level].pradius){restarttime=time; lost=1; enemy[level][i].touched=1; collision=1;}
		}
	}

	doenemiesmove=0;

	time++;

	goalstouched=0;
	for(i=0; i<numberofgoals[level]; i++){if(goal[level][i].touched){goalstouched++}}

	if(goalstouched==numberofgoals[level] && totalenemygoaldistance<levelinfo[level].ttegd && !won && !lost){restarttime=time; won=1;}

	if(won){
		ctx.beginPath();
		ctx.arc(field.width/2, field.height/2, ((time-restarttime)/restartduration)*levelinfo[level].rsize, 0, 2 * Math.PI);
		ctx.fillStyle=levelinfo[(level+1)%10].rcolour;
		ctx.lineWidth=levelinfo[(level+1)%10].rpipingwidth;
		ctx.strokeStyle=levelinfo[(level+1)%10].rpipingcolour;
		ctx.fill();
		ctx.stroke();
	}

	if(lost){
		ctx.beginPath();
		ctx.arc(field.width/2, field.height/2, ((time-restarttime)/restartduration)*levelinfo[level].rsize, 0, 2 * Math.PI);
		ctx.fillStyle=levelinfo[level].rcolour;
		ctx.lineWidth=levelinfo[level].rpipingwidth;
		ctx.strokeStyle=levelinfo[level].rpipingcolour;
		ctx.fill();
		ctx.stroke();
	}

	if((won || lost) && time==restarttime+restartduration){
		for(i=0; i<numberofenemies[level]; i++){enemy[level][i].x=enemy[level][i].startingx; enemy[level][i].y=enemy[level][i].startingy; enemy[level][i].touched=0;}
		for(i=0; i<numberofgoals[level]; i++){goal[level][i].touched=0;}
		if(won){level++; if(level==11){level=1;}}
		won=0; lost=0; time=0; ringout=0; collision=0; totalenemygoaldistance=levelinfo[level].ttegd+1;
		player.x=levelinfo[level].px; player.y=levelinfo[level].py;
	}

	setTimeout(draw, 1000/fps);
}

draw();

</script>
